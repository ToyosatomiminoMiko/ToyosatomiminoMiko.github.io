<!DOCTYPE html>
<!--
2022.06.11.10:00:00 
ToyosatomiminoMiko(éƒå­£ä»)
*LED canvas é¡¹ç›®åŸºäº DeepSeek ç”Ÿæˆçš„ä»£ç (MITè®¸å¯)å¼€å‘*
-->
<html>


<head>
    <meta charset="utf-8">
    <script src="/static/twitter-bootstrap/5.3.0/js/bootstrap.min.js"></script>
    <link href="/static/twitter-bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
    <title>ToyosatomiminoMiko_static</title>
    <style>
        * {
            /*å­—ä½“åç§°å¿…é¡»è®¾ç½®ä¸ºUnicodeå½¢å¼æ‰èƒ½ç”Ÿæ•ˆ */
            /*font-family: "\5FAE\8F6F\96C5\9ED1";*/
            font-family: "\0063\006f\006e\0073\006f\006c\0061\0073";
        }

        body {
            /* é˜²æ­¢ --darkreader-inline-bgimage */
            background-image: var(--custom-bg-image, url(/static/images/bgimg/bg-code.gif)) !important;
        }

        nav {
            position: relative;
            left: 0px;
            right: 0px;
            top: 0px;
        }

        aside {
            /*position: absolute;*/
            margin-left: auto;
            margin-right: auto;
            margin-bottom: 0px;
            height: 2560px;
            width: 1440px;
        }

        button {
            /*æ¶ˆé™¤buttonçš„é»˜è®¤æ ·å¼*/
            margin: 0;
            padding: 0;
            border: none;
            /*è‡ªå®šä¹‰è¾¹æ¡†*/
            outline: none;
            /*æ¶ˆé™¤é»˜è®¤ç‚¹å‡»è“è‰²è¾¹æ¡†æ•ˆæœ*/
            background: none;
        }

        .bg0 {
            background-color: #00000000;
        }

        .card-head {
            width: 50px;
            margin: 0px;
        }

        .pl-head {
            width: 40px;
            margin: 10px;
        }

        .pl {
            margin: 10px;

        }
    </style>
    <script>
        // æ›´æ–°ç”»å¸ƒä½ç½®ä¿¡æ¯(çª—å£å˜åŒ–æ—¶è°ƒç”¨)
        function updateCanvasRect() {
            canvasRect = canvas.getBoundingClientRect();
        }

        /**
         * å°†é¼ æ ‡åæ ‡è½¬æ¢ä¸ºç”»å¸ƒåƒç´ åæ ‡
         * @param {MouseEvent} event - é¼ æ ‡äº‹ä»¶å¯¹è±¡
         * @returns {Object} åŒ…å«x,yçš„åƒç´ åæ ‡å¯¹è±¡
         */
        function getPixelPosition(event) {
            return {
                x: Math.min(
                    canvas.width - 1,
                    Math.max(
                        0,
                        Math.floor(
                            ((event.clientX - canvasRect.left) / canvasRect.width) * canvas.width
                        )
                    )
                ),
                y: Math.min(
                    canvas.height - 1,
                    Math.max(
                        0,
                        Math.floor(
                            ((event.clientY - canvasRect.top) / canvasRect.height) * canvas.height
                        )
                    )
                ),
            };
        }

        // æ›´æ–°æŒ‡ç¤ºå™¨ä½ç½®
        function updateIndicator(pos) {
            const pixelWidth = canvasRect.width / canvas.width;
            const pixelHeight = canvasRect.height / canvas.height;

            // æ·»åŠ è¾¹ç•Œæ£€æŸ¥
            pos.x = Math.max(0, Math.min(canvas.width - 1, pos.x));
            pos.y = Math.max(0, Math.min(canvas.height - 1, pos.y));

            // ç²¾ç¡®å¯¹é½åƒç´ è¾¹ç•Œ
            indicator.style.left = `${canvasRect.left + pos.x * pixelWidth}px`;
            indicator.style.top = `${canvasRect.top + pos.y * pixelHeight}px`;

            // åŠ¨æ€è°ƒæ•´æŒ‡ç¤ºå™¨å°ºå¯¸
            indicator.style.width = `${Math.ceil(pixelWidth)}px`;
            indicator.style.height = `${Math.ceil(pixelHeight)}px`;

            // ä¿æŒå¯è§æ€§
            indicator.style.display = "block";
            coordsDisplay.style.display = "block";
        }
        // ======================
        // coordsDisplay
        // ======================
        /**
         * æ›´æ–°åæ ‡æ˜¾ç¤º å®æ—¶æ˜¾ç¤ºé¼ æ ‡åæ ‡
         * @param {Object} pos - åŒ…å«x,yçš„åæ ‡å¯¹è±¡
         */
        function updateCoordsDisplay(pos) {
            coordsDisplay.textContent = `coordinate:(X:${pos.x},Y:${pos.y})`;
        }

        // ======================
        // ç»˜å›¾æ ¸å¿ƒé€»è¾‘
        // ======================
        /**
         * è®¾ç½®å•ä¸ªåƒç´ é¢œè‰²
         * @param {number} x - Xåæ ‡
         * @param {number} y - Yåæ ‡
         */
        function setPixel(x, y) {
            const index = (y * canvas.width + x) * 4;
            imageData.data[index] = pixiv_color ? 0 : 255; // R
            imageData.data[index + 1] = pixiv_color ? 0 : 255; // G
            imageData.data[index + 2] = pixiv_color ? 0 : 255; // B
            // æ³¨æ„:ä¿ç•™Alphaé€šé“ä¸å˜
        }

        /**
         * Bresenham ç›´çº¿ç®—æ³•
         * @param {number} x1 - èµ·ç‚¹X
         * @param {number} y1 - èµ·ç‚¹Y
         * @param {number} x2 - ç»ˆç‚¹X
         * @param {number} y2 - ç»ˆç‚¹Y
         */
        function drawLine(x1, y1, x2, y2) {
            const dx = Math.abs(x2 - x1);
            const dy = -Math.abs(y2 - y1);
            const sx = x1 < x2 ? 1 : -1;
            const sy = y1 < y2 ? 1 : -1;
            let err = dx + dy;

            while (true) {
                setPixel(x1, y1);
                if (x1 === x2 && y1 === y2) break;
                const e2 = 2 * err;
                if (e2 >= dy) {
                    err += dy;
                    x1 += sx;
                }
                if (e2 <= dx) {
                    err += dx;
                    y1 += sy;
                }
            }
        }

        /**
         * å®æ—¶é¢„è§ˆç›´çº¿(ä¸ä¿®æ”¹å®é™…å›¾åƒæ•°æ®)
         * @param {number} endX - ç»ˆç‚¹Xåæ ‡
         * @param {number} endY - ç»ˆç‚¹Yåæ ‡
         * @param {boolean} isBlack - çº¿æ®µé¢œè‰²
         */
        function previewLine(endX, endY) {
            ctx.putImageData(previewImageData, 0, 0);

            // åˆ›å»ºä¸´æ—¶canvaså®ç°é¢„è§ˆæ•ˆæœ
            const tempCanvas = document.createElement("canvas");
            tempCanvas.width = canvas.width;
            tempCanvas.height = canvas.height;
            const tempCtx = tempCanvas.getContext("2d");
            tempCtx.imageSmoothingEnabled = false;

            // ä½¿ç”¨æ··åˆæ¨¡å¼ä¿æŒäºŒå€¼åŒ–æ ¸å¿ƒ
            tempCtx.globalCompositeOperation = "source-over";
            tempCtx.fillStyle = PREVIEW_COLOR; // ç›´çº¿å¿…é¡»fillStyle
            tempCtx.globalAlpha = PREVIEW_OPACITY;

            // Bresenhamç®—æ³•ç»˜åˆ¶é¢„è§ˆçº¿
            let x1 = startPos.x,
                y1 = startPos.y;
            let x2 = endX,
                y2 = endY;

            const dx = Math.abs(x2 - x1);
            const dy = -Math.abs(y2 - y1);
            const sx = x1 < x2 ? 1 : -1;
            const sy = y1 < y2 ? 1 : -1;
            let err = dx + dy;

            while (true) {
                // ç»˜åˆ¶åŠé€æ˜çº¢è‰²æ–¹å—
                tempCtx.fillRect(x1, y1, 1, 1);
                if (x1 === x2 && y1 === y2) break;
                const e2 = 2 * err;
                if (e2 >= dy) {
                    err += dy;
                    x1 += sx;
                }
                if (e2 <= dx) {
                    err += dx;
                    y1 += sy;
                }
            }

            // å åŠ åˆ°ä¸»ç”»å¸ƒ
            ctx.drawImage(tempCanvas, 0, 0);
        }
        // çŸ©å½¢ç»˜åˆ¶é€»è¾‘
        function drawRectangle(x1, y1, x2, y2) {
            // è®¡ç®—çŸ©å½¢è¾¹ç•Œ
            const left = Math.min(x1, x2);
            const right = Math.max(x1, x2);
            const top = Math.min(y1, y2);
            const bottom = Math.max(y1, y2);
            // ç»˜åˆ¶é¡¶éƒ¨å’Œåº•éƒ¨è¾¹æ¡†
            for (let x = left; x <= right; x++) {
                setPixel(x, top);
                setPixel(x, bottom);
            }
            // ç»˜åˆ¶å·¦å³è¾¹æ¡† æ’é™¤è§’ç‚¹é¿å…é‡å¤
            for (let y = top + 1; y < bottom; y++) {
                setPixel(left, y);
                setPixel(right, y);
            }
        }

        function previewRectangle(endX, endY) {
            ctx.putImageData(previewImageData, 0, 0);

            // åˆ›å»ºä¸´æ—¶å‰¯æœ¬è¿›è¡Œæ“ä½œ
            const tempImageData = new ImageData(
                new Uint8ClampedArray(imageData.data),
                canvas.width,
                canvas.height
            );

            // ä½¿ç”¨ä¸´æ—¶ä¸Šä¸‹æ–‡ç»˜åˆ¶é¢„è§ˆ
            const tempCtx = canvas.getContext('2d');
            tempCtx.putImageData(tempImageData, 0, 0);

            // ç»˜åˆ¶é¢„è§ˆè¾¹æ¡† çº¢è‰²åŠé€æ˜
            tempCtx.strokeStyle = PREVIEW_COLOR; // çŸ©å½¢å¿…é¡»strokeStyle
            tempCtx.globalAlpha = PREVIEW_OPACITY;
            tempCtx.lineWidth = 1;
            tempCtx.strokeRect(
                Math.min(startPos.x, endX) + 0.5,
                Math.min(startPos.y, endY) + 0.5,
                Math.abs(endX - startPos.x),
                Math.abs(endY - startPos.y)
            );
        }
        // ======================
        // æ•°æ®ç”Ÿæˆæ¨¡å—
        // ======================
        function generateEmbeddedData() {
            const buffer = new Uint8Array(128 * 8); // 128åˆ— x 8é¡µ
            // éå†æ¯ä¸ªé¡µ(8é¡µï¼Œæ¯é¡µ8è¡Œ)
            for (let page = 0; page < 8; page++) {
                // éå†æ¯åˆ—(128åˆ—)
                for (let x = 0; x < 128; x++) {
                    let byte = 0;
                    // ç»„åˆ8ä¸ªå‚ç›´åƒç´ ä¸ºä¸€ä¸ªå­—èŠ‚
                    for (let bit = 0; bit < 8; bit++) {
                        const y = page * 8 + bit;
                        const idx = (y * 128 + x) * 4;
                        // åˆ¤æ–­åƒç´ é¢œè‰²(é»‘è‰²ä¸º1)
                        const isBlack =
                            imageData.data[idx] === 0 &&
                            imageData.data[idx + 1] === 0 &&
                            imageData.data[idx + 2] === 0;
                        // è¦æ±‚æœ€é«˜ä½bit7å¯¹åº”é¡µé¡¶éƒ¨çš„åƒç´ 
                        byte |= (isBlack ? 1 : 0) << bit;
                    }
                    buffer[page * 128 + x] = byte;
                }
            }
            return buffer; // {Uint8Array} 1024å­—èŠ‚çš„æ˜¾ç¤ºæ•°æ®
        }
        // ======================
        // å·¥å…·æ§åˆ¶åŒº
        // ======================
        // æ¸…é™¤ç”»æ¿
        function clearCanvas() {
            for (let i = 0; i < imageData.data.length; i += 4) {
                imageData.data[i] = pixiv_color ? 0 : 255;
                imageData.data[i + 1] = pixiv_color ? 0 : 255;
                imageData.data[i + 2] = pixiv_color ? 0 : 255;
            }
            ctx.putImageData(imageData, 0, 0);
        }
        // å·¥å…·åˆ‡æ¢
        function changeTool(tool) {
            currentTool = tool;
            startPos = null;
            previewImageData = null;
            ctx.putImageData(imageData, 0, 0); // æ¸…é™¤ä»»ä½•é¢„è§ˆ
        }
        // æ•°æ®å¯¼å‡º
        function exportEmbedded() {
            const data = generateEmbeddedData();
            const outputTextarea = document.getElementById("exportOutput");
            let output = "";
            output = `const uint8_t bitmap[1024] = {\n  `;
            data.forEach((byte, i) => {
                output += `0x${byte.toString(16).padStart(2, "0")}`;
                output += i !== data.length - 1 ? ", " : "";
                if ((i + 1) % 16 === 0) output += "\n  ";
            });
            output += "};";
            // æ›´æ–°å¸¸é©»æ–‡æœ¬åŸŸ
            outputTextarea.value = output;
        }
        // æ•°æ®å¯¼å…¥
        function importEmbeddedData() {
            const input = document.getElementById("importData").value;
            try {
                // æå–åå…­è¿›åˆ¶æ•°æ®
                const hexValues = input.match(/0x[0-9a-fA-F]{2}/g);
                if (!hexValues || hexValues.length !== 1024) {
                    throw new Error("âŒæ•°æ®æ ¼å¼é”™è¯¯,éœ€è¦åŒ…å«1024ä¸ªåå…­è¿›åˆ¶å€¼");
                }
                // è½¬æ¢åˆ°Uint8Array
                const buffer = new Uint8Array(hexValues.map((v) => parseInt(v, 16)));
                // æ›´æ–°ç”»å¸ƒæ•°æ®
                updateCanvasFromBuffer(buffer);
                alert("âœ…æ•°æ®æ ¼å¼æ­£ç¡®,å·²å¯¼å…¥!");
            } catch (e) {
                alert(`âŒå¯¼å…¥å¤±è´¥:${e.message}`);
            }
        }
        // ======================
        // ç¼“å†²æ•°æ®è½¬ç”»å¸ƒå›¾åƒ
        // ======================
        function updateCanvasFromBuffer(buffer) {
            // é‡ç½®ç”»å¸ƒä¸ºç™½è‰²
            for (let i = 0; i < imageData.data.length; i += 4) {
                imageData.data[i] = 255;
                imageData.data[i + 1] = 255;
                imageData.data[i + 2] = 255;
            }
            // è§£æç¼“å†²æ•°æ®
            for (let page = 0; page < 8; page++) {
                for (let x = 0; x < 128; x++) {
                    const byte = buffer[page * 128 + x];
                    for (let bit = 0; bit < 8; bit++) {
                        const y = page * 8 + bit;
                        const isBlack = (byte & (1 << bit)) !== 0; // æ³¨æ„ä½é¡ºåº
                        const index = (y * 128 + x) * 4;
                        imageData.data[index] = isBlack ? 0 : 255;
                        imageData.data[index + 1] = isBlack ? 0 : 255;
                        imageData.data[index + 2] = isBlack ? 0 : 255;
                    }
                }
            }
            // æ›´æ–°ç”»å¸ƒæ˜¾ç¤º
            ctx.putImageData(imageData, 0, 0);
        }
        // å¯¼å‡ºæ–‡æœ¬åŸŸ:æ–°å¤åˆ¶å‡½æ•°
        async function copyExportedData() {
            const textarea = document.getElementById("exportOutput");
            try {
                // ä½¿ç”¨ç°ä»£ Clipboard API
                await navigator.clipboard.writeText(textarea.value);
                // æ·»åŠ è§†è§‰åé¦ˆ
                const btn = document.querySelector("#output-button");
                btn.textContent = "âœ…å·²å¤åˆ¶!";
                setTimeout(() => {
                    btn.textContent = "å¤åˆ¶åˆ°å‰ªè´´æ¿";
                }, 4000);
            } catch (err) {
                console.error("âŒå¤åˆ¶å¤±è´¥:", err);
                alert("âŒå¤åˆ¶å¤±è´¥,è¯·æ‰‹åŠ¨é€‰æ‹©æ–‡æœ¬åæŒ‰ Ctrl+C");
            }
        }

        function changeColor() {
            const btn = document.getElementById('change-color');
            pixiv_color = !pixiv_color;
            if (pixiv_color) {
                btn.textContent = "ğŸ”„ï¸é»‘è‰²â¬›";
                btn.style.color = "#ffffff";
                btn.style.backgroundColor = "#000000";
            } else {
                btn.textContent = "ğŸ”„ï¸ç™½è‰²â¬œ";
                btn.style.color = "#000000";
                btn.style.backgroundColor = "#ffffff";
            }
        }


    </script>
</head>

<body>
    <header>
        <ul class="nav nav-tabs  bg-light">
            <!--ç”¨æˆ·å¤´åƒ-->
            <li class="nav-item">
                <style>
                    .head {
                        width: 35px;
                        margin: 2px;
                        margin-left: 20px;
                        margin-right: 20px;
                    }

                    .head:hover {
                        filter: drop-shadow(0 0 15px #00ffc3);
                    }
                </style>
                <img src="https://avatars.githubusercontent.com/u/63940347" class="rounded-circle head" alt="head">
            </li>
            <li class="nav-item">
                <a class="nav-link active" data-bs-toggle="tab" href="#home">é¦–é¡µ</a>
            </li>

            <li class="nav-item">
                <a class="nav-link" data-bs-toggle="tab" href="#oled">OLED</a>
            </li>

            <li class="nav-item">
                <a class="nav-link" data-bs-toggle="tab" href="#article">æ–‡ç« </a>
            </li>

            <li class="nav-item">
                <a class="nav-link" data-bs-toggle="tab" href="#setting">è®¾ç½®</a>
            </li>
            
        </ul>
    </header>
    <aside>
        <div class="tab-content">
            <!--æ ‡ç­¾é¡µ-->
            <div class="tab-pane fade show active" id="home">
                <div class="card bg0">
                    <div class="card-header">
                        <h4>æ¨èæ–‡ç« </h4>
                    </div>
                    <div class="card-body card-deck row " id="app">
                        <!--å†…å®¹ä¸»ä½“-->
                        <div class="card col-3" style="width:300px">
                            <img class="card-img-top" src="/static/images/cardimg/card0.jpg" alt="Card image"
                                style="width:100%">
                            <div class="card-body">
                                <h4 class="card-title">Title</h4>
                                <p class="card-text">test-text test-text test-text test-text test-text test-text </p>
                                <a href="#" class="btn">Read more</a>
                                <p class="card-text"><small class="text-muted">2022-06-13</small></p>
                                <!--smallæ ‡ç­¾ä¸ºæ ‡æ³¨ä¿¡æ¯-->
                            </div>
                        </div>
                        <div class="card col-3" style="width:300px">
                            <img class="card-img-top" src="/static/images/cardimg/card0.jpg" alt="Card image"
                                style="width:100%">
                            <div class="card-body">
                                <h4 class="card-title">Markdown</h4>
                                <p class="card-text">Markdownæ˜¯ä¸€ç§è½»é‡çº§æ ‡è®°è¯­è¨€ï¼Œæ’ç‰ˆè¯­æ³•ç®€æ´ï¼Œè®©äººä»¬æ›´å¤šåœ°å…³æ³¨å†…å®¹æœ¬èº«è€Œéæ’ç‰ˆã€‚
                                </p>
                                <a href="./article/01" class="btn" target="_blank">Read more</a>
                                <p class="card-text"><small class="text-muted">2022-06-13</small></p>
                            </div>
                        </div>
                    </div>
                    <script>
                        Vue.createApp({
                            data() {
                                return {
                                    title: 'TEXT'
                                }
                            }
                        }).mount('#app');
                    </script>
                </div>
                <div class="card bg0">
                    <div class="card-header">
                        <h4>æ¨èæ—¥å¿—</h4>
                    </div>
                    <div class="card-body ">
                        <!--å†…å®¹ä¸»ä½“:æ—¥å¿—åˆ—-->
                        <div class="card-columns  d-flex justify-content-center">

                            <!--å•ä¸ªæ—¥å¿—-->
                            <div class="card col-6 align-self-center">

                                <div class="card-header d-flex">
                                    <!--å‘å¸ƒè€…ä¿¡æ¯-->

                                    <img src="https://avatars.githubusercontent.com/u/63940347"
                                        class="rounded-circle card-head p-1" alt="head">
                                    <p class="card-text p-1">ç”¨æˆ·0</p>
                                    <h5 class="card-title p-1">å‘å¸ƒåŠ¨æ€</h5>

                                    <p class="card-text p-1">æ—¥å¿—æ ‡é¢˜</p>
                                </div>

                                <div class="card-body">
                                    <p class="card-text">
                                        Ğ˜ Ğ²Ğ½Ğ¾Ğ²ÑŒ Ğ¿Ñ€Ğ¾Ğ´Ğ¾Ğ»Ğ¶Ğ°ĞµÑ‚ÑÑ Ğ±Ğ¾Ğ¹
                                    </p>

                                    <a class="btn" data-bs-toggle="collapse" href="#collapseOne">å±•å¼€è¯„è®º</a>
                                </div>
                                <img class="card-img-bottom" src="/static/images/cardimg/card1.jpg" alt="">
                                <!--æŠ˜å -->
                                <div id="collapseOne" class="collapse" data-bs-parent="#accordion">
                                    <!--å‘å¸ƒè¯„è®º-->
                                    <div class="alert alert-info">
                                        <form action="#" method="post"></form>
                                        <img src="https://avatars.githubusercontent.com/u/63940347"
                                            class="rounded-circle pl-head" alt="head">
                                        <label for="comment">è¯·è¾“å…¥è¯„è®º:</label>
                                        <button type="submit" class="btn btn-success">æäº¤</button>
                                        <textarea class="form-control" rows="5" id="comment" name="text"></textarea>
                                        </form>
                                    </div>
                                    <!--/å‘å¸ƒè¯„è®º-->
                                    <!--åº•éƒ¨è¯„è®º-->
                                    <div class="card-footer">
                                        <!--å•ä¸ªè¯„è®º-->
                                        <div class="d-flex">
                                            <img src="/static/images/portrait/img1.jpg"
                                                class="rounded-circle card-head p-1" alt="head">
                                            <p class="card-text">ç”¨æˆ·1</p>
                                            <p class="card-text"><small class="text-muted">2022-06-15</small></p>
                                            <p class="card-text p-1">è¯„è®ºå†…å®¹</p>
                                        </div>
                                        <!--/å•ä¸ªè¯„è®º-->
                                        <!--å•ä¸ªè¯„è®º-->
                                        <div class="d-flex">
                                            <img src="/static/images/portrait/img2.jpg"
                                                class="rounded-circle card-head p-1" alt="head">
                                            <p class="card-text">ç”¨æˆ·2</p>
                                            <p class="card-text"><small class="text-muted">2022-06-18</small></p>
                                            <p class="card-text p-1">ğŸ˜…ğŸ˜…ğŸ˜…ğŸ˜…</p>
                                        </div>
                                        <!--/å•ä¸ªè¯„è®º-->

                                    </div>
                                </div>
                            </div>
                            <!--/å•ä¸ªæ—¥å¿—-->

                        </div>
                    </div>
                </div>
            </div>
            <!--OLED_canvas-->
            <div class="tab-pane fade" id="oled">
                <style>
                    /* ç”»å¸ƒæ ·å¼ */
                    canvas {
                        /* æ”¾å¤§æ˜¾ç¤ºå°ºå¯¸ */
                        width: 512px;
                        height: 256px;
                        /* ä¿æŒåƒç´ é”åˆ© */
                        image-rendering: pixelated;
                        /* éšè—é»˜è®¤é¼ æ ‡æŒ‡é’ˆ */
                        cursor: none;
                    }

                    /* å·¥å…·åŒºå¸ƒå±€ */
                    .tools {
                        margin-top: 15px;
                        color: #ffffff;
                    }

                    /* çŠ¶æ€æŒ‡ç¤ºå™¨æ ·å¼ */
                    .coords-display {
                        background: #f0f0f0;
                        padding: 8px 15px;
                        border-radius: 5px;
                        font-family: monospace;
                        margin-top: 10px;
                        /* é»˜è®¤æ˜¾ç¤º */
                        display: flex;
                    }

                    /* ä¼˜åŒ–æŒ‡ç¤ºå™¨æ ·å¼ */
                    .pixel-indicator {
                        /* æ”¹ä¸ºfixedå®šä½ */
                        position: fixed;
                        z-index: 9999;
                        background: rgba(255, 0, 0, 0.6);
                        /*box-shadow: 0 0 2px rgba(0, 0, 0, 0.5);*/
                        /* æ·»åŠ å¹³æ»‘ç§»åŠ¨æ•ˆæœ */
                        transition: all 10ms linear;
                        pointer-events: none;
                        /* åˆå§‹éšè— */
                        display: none;
                    }

                    .textarea-data {
                        /*é”å®šå®½åº¦*/
                        resize: vertical;
                        min-height: 150px;
                        width: 700px;
                        font-family: monospace;
                        display: block;
                    }

                    .area-data {
                        margin-top: 10px;
                        margin-bottom: 10px;
                    }

                    #change-color {
                        color: #ffffff;
                        background-color: #000000;
                    }
                </style>
                <div class="row">
                    <!--å†…å®¹ä¸»ä½“-->
                    <div class="card-columns  d-flex justify-content-center">
                        <!--oled-->
                        <div class="card col-6 align-self-center">
                            <div class="card-header d-flex">
                                <p class="card-text p-1">OLED Canvas</p>
                            </div>
                            <div class="card-body">
                                <!-- çŠ¶æ€æŒ‡ç¤ºåŒº -->
                                <div id="coordsDisplay" class="coords-display card-text">coordinate:(X:-,Y:-)</div>

                                <br />
                                <!-- ä¸»ç”»å¸ƒ -->
                                <canvas id="pixelCanvas"></canvas>
                                <div id="pixelIndicator" class="pixel-indicator"></div>
                                <br />
                                <!-- å·¥å…·æ§åˆ¶åŒº -->
                                <div class="tools">
                                    <button type="button" class="btn btn-primary" onclick="clearCanvas()">é¢œè‰²é‡ç½®</button>
                                    <button type="button" class="btn btn-primary" onclick="changeColor()"
                                        id="change-color">ğŸ”„ï¸é»‘è‰²â¬›</button>
                                    <input type="radio" name="tools" value="free" onchange="changeTool(this.value)"
                                        checked />ç»˜åˆ¶
                                    <input type="radio" name="tools" value="line" onchange="changeTool(this.value)" />ç›´çº¿
                                    <input type="radio" name="tools" value="rectangle"
                                        onchange="changeTool(this.value)" />çŸ©å½¢
                                    <button type="button" class="btn btn-primary"
                                        onclick="exportEmbedded()">å¯¼å‡ºæ•°æ®</button>
                                </div>
                                <br />
                                <!-- æ•°æ®è¾“å…¥è¾“å‡ºå®¹å™¨ -->
                                <div>
                                    <!--å¯¼å‡ºæ•°æ®åŒº-->
                                    <div class="area-data">
                                        <textarea id="exportOutput" class="textarea-data"></textarea>
                                        <br /><button type="button" class="btn btn-primary" onclick="copyExportedData()"
                                            id="output-button">
                                            å¤åˆ¶åˆ°å‰ªè´´æ¿
                                        </button>
                                    </div>
                                    <!--å¯¼å…¥æ•°æ®åŒº-->
                                    <div class="area-data">
                                        <textarea id="importData" class="textarea-data"
                                            placeholder="const uint8_t bitmap[1024] = {0x00, 0x01, ...};"></textarea>
                                        <br /><button type="button" class="btn btn-primary"
                                            onclick="importEmbeddedData()">å¯¼å…¥æ•°æ®</button>
                                    </div>
                                </div>
                                <!--ç”»å¸ƒè®¾ç½®-->
                                <script>
                                    // ======================
                                    // ç”»å¸ƒåˆå§‹åŒ–
                                    // ======================
                                    const canvas = document.getElementById("pixelCanvas");
                                    const ctx = canvas.getContext("2d");
                                    const indicator = document.getElementById("pixelIndicator");
                                    // è®¾ç½®ç‰©ç†åƒç´ å°ºå¯¸(å®é™…åˆ†è¾¨ç‡)
                                    canvas.width = 128; // Embedded çš„å…¸å‹å®½åº¦
                                    canvas.height = 64; // Embedded çš„å…¸å‹é«˜åº¦
                                    // ç”»ç¬”é¢œè‰²
                                    let pixiv_color = true;
                                    // åˆå§‹åŒ–ç™½è‰²ç”»å¸ƒ
                                    let imageData = ctx.createImageData(canvas.width, canvas.height);
                                    // å¡«å……ç™½è‰²èƒŒæ™¯(RGBAæ ¼å¼)
                                    for (let i = 0; i < imageData.data.length; i += 4) {
                                        imageData.data[i] = 255; // R
                                        imageData.data[i + 1] = 255; // G
                                        imageData.data[i + 2] = 255; // B
                                        imageData.data[i + 3] = 255; // A(å®Œå…¨ä¸é€æ˜)
                                    }
                                    ctx.putImageData(imageData, 0, 0);
                                    // é¢„è§ˆé¢œè‰²é…ç½®
                                    const PREVIEW_COLOR = "#FF0000"; // çº¢è‰²é¢„è§ˆ
                                    const PREVIEW_OPACITY = 0.6; // 60%é€æ˜åº¦
                                    // åæ ‡è½¬æ¢ç³»ç»Ÿ
                                    let canvasRect = canvas.getBoundingClientRect();
                                    // çŠ¶æ€æŒ‡ç¤ºç³»ç»Ÿ
                                    const coordsDisplay = document.getElementById("coordsDisplay");
                                    // ç»˜å›¾å·¥å…·è®¾ç½®
                                    let currentTool = "free";
                                    // è®°å½•ä½ç½®/é¦–æ¬¡æŒ‰ä¸‹
                                    let startPos = null;
                                    let lastPos = null;
                                    // å­˜å‚¨é¢„è§ˆå‰çš„ç”»å¸ƒçŠ¶æ€
                                    let previewImageData = null;
                                    // çª—å£äº‹ä»¶ç›‘å¬
                                    let resizeTimer;
                                </script>
                                <!--æ“ä½œé€»è¾‘-->
                                <script>

                                    // å³é”®èœå•å…³é—­
                                    canvas.oncontextmenu = (e) => e.preventDefault();
                                    // ======================
                                    // é¼ æ ‡äº‹ä»¶ç›‘å¬
                                    // ======================
                                    // é¼ æ ‡è¿›å…¥äº‹ä»¶
                                    canvas.addEventListener("mouseenter", updateCanvasRect);
                                    // é¼ æ ‡é€€å‡ºäº‹ä»¶
                                    canvas.addEventListener("mouseleave", function () {
                                        // éšè—ç”»ç¬”
                                        indicator.style.display = "none";
                                        // é‡ç½®åæ ‡æŒ‡ç¤º
                                        coordsDisplay.textContent = "coordinate:(X:-,Y:-)";
                                    });
                                    // é¼ æ ‡ç§»åŠ¨äº‹ä»¶
                                    canvas.addEventListener("mousemove", function (e) {
                                        const pos = getPixelPosition(e);
                                        updateCoordsDisplay(pos);
                                        updateIndicator(pos);
                                        // ç›´çº¿é¢„è§ˆæ¨¡å¼
                                        if (currentTool === "line" && startPos) {
                                            previewLine(pos.x, pos.y);
                                            return; // é˜»æ–­è‡ªç”±ç»˜åˆ¶é€»è¾‘
                                        }
                                        // è‡ªç”±ç»˜åˆ¶æ¨¡å¼(ä»…åœ¨éç›´çº¿å·¥å…·æ—¶ç”Ÿæ•ˆ)
                                        else if ((currentTool === "free") && e.buttons & 3) {
                                            if (lastPos) {
                                                // é¼ æ ‡ç§»åŠ¨è¿‡å¿«é‡‡æ ·ä½ç”»ç›´çº¿
                                                drawLine(lastPos.x, lastPos.y, pos.x, pos.y);
                                            } else {
                                                setPixel(pos.x, pos.y);
                                            }
                                            ctx.putImageData(imageData, 0, 0);
                                            lastPos = pos;
                                        }
                                        // çŸ©å½¢é¢„è§ˆæ¨¡å¼
                                        else if (currentTool === "rectangle" && startPos) {
                                            previewRectangle(pos.x, pos.y);
                                            return;
                                        }
                                    });
                                    // é¼ æ ‡æŒ‰ä¸‹äº‹ä»¶
                                    canvas.addEventListener("mousedown", function (e) {
                                        const pos = getPixelPosition(e);
                                        if (currentTool === "line") {
                                            if (!startPos) {
                                                startPos = pos;
                                                previewImageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
                                            } else {
                                                drawLine(startPos.x, startPos.y, pos.x, pos.y);
                                                ctx.putImageData(imageData, 0, 0);
                                                startPos = null;
                                            }
                                        }
                                        else if (currentTool === "free") {
                                            setPixel(pos.x, pos.y);
                                            ctx.putImageData(imageData, 0, 0);
                                            lastPos = pos;
                                        }
                                        else if (currentTool === "rectangle") {
                                            if (!startPos) {
                                                startPos = pos;
                                                previewImageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
                                            } else {
                                                drawRectangle(startPos.x, startPos.y, pos.x, pos.y);
                                                ctx.putImageData(imageData, 0, 0);
                                                startPos = null;
                                            }
                                        }
                                    });
                                    // ======================
                                    // é”®ç›˜äº‹ä»¶ç›‘å¬
                                    // ======================
                                    // æŒ‰ä¸‹`ESC`ç»ˆæ­¢ç›´çº¿ç»˜åˆ¶
                                    document.addEventListener("keydown", function (e) {
                                        if (e.key === "Escape" &&
                                            (currentTool === "line" ||
                                                currentTool === "rectangle") &&
                                            startPos) {
                                            // æ¢å¤é¢„è§ˆå‰çŠ¶æ€
                                            ctx.putImageData(previewImageData, 0, 0);
                                            // é‡ç½®ç»˜åˆ¶çŠ¶æ€
                                            startPos = null;
                                            previewImageData = null;
                                        }
                                    });
                                    // ======================
                                    // çª—å£äº‹ä»¶ç›‘å¬
                                    // ======================
                                    window.addEventListener("scroll", updateCanvasRect, true);
                                    window.addEventListener("resize", () => {
                                        clearTimeout(resizeTimer);
                                        resizeTimer = setTimeout(updateCanvasRect, 100);
                                    });
                                </script>
                            </div>
                        </div>
                        <!--/oled-->
                    </div>
                </div>
            </div>

            <div class="tab-pane fade" id="article">
                <section class="card-deck row">
                    <!--å†…å®¹ä¸»ä½“-->
                    <div class="card col-3" style="width:300px">
                        <img class="card-img-top" src="/static/images/cardimg/card0.jpg" alt="Card image"
                            style="width:100%">
                        <div class="card-body">
                            <h4 class="card-title">Markdown</h4>
                            <p class="card-text">Markdownæ˜¯ä¸€ç§è½»é‡çº§æ ‡è®°è¯­è¨€ï¼Œæ’ç‰ˆè¯­æ³•ç®€æ´ï¼Œè®©äººä»¬æ›´å¤šåœ°å…³æ³¨å†…å®¹æœ¬èº«è€Œéæ’ç‰ˆã€‚
                            </p>
                            <a href="./article/01" class="btn" target="_blank">Read more</a>
                            <p class="card-text"><small class="text-muted">2022-06-13</small></p>
                        </div>
                    </div>
                    <div class="card col-4" style="width:300px">
                        <img class="card-img-top" src="/static/images/cardimg/card0.jpg" alt="Card image"
                            style="width:100%">
                        <div class="card-body">
                            <h4 class="card-title">Title</h4>
                            <p class="card-text">test-text test-text test-text test-text test-text test-text </p>
                            <a href="#" class="btn">Read more</a>
                            <p class="card-text"><small class="text-muted">2022-06-13</small></p>
                        </div>
                    </div>
                    <div class="card col-4" style="width:300px">
                        <img class="card-img-top" src="/static/images/cardimg/card0.jpg" alt="Card image"
                            style="width:100%">
                        <div class="card-body">
                            <h4 class="card-title">Title</h4>
                            <p class="card-text">test-text test-text test-text test-text test-text test-text </p>
                            <a href="#" class="btn">Read more</a>
                            <p class="card-text"><small class="text-muted">2022-06-13</small></p>
                        </div>
                    </div>
                    <div class="card col-4" style="width:300px">
                        <img class="card-img-top" src="/static/images/cardimg/card0.jpg" alt="Card image"
                            style="width:100%">
                        <div class="card-body">
                            <h4 class="card-title">Title</h4>
                            <p class="card-text">test-text test-text test-text test-text test-text test-text </p>
                            <a href="#" class="btn">Read more</a>
                            <p class="card-text"><small class="text-muted">2022-06-13</small></p>
                        </div>
                    </div>
                </section>

            </div>
            <div class="tab-pane fade" id="setting">
                <!--å†…å®¹ä¸»ä½“-->
                <div>
                    <!--èƒŒæ™¯ä¿®æ”¹-->
                    <h4>ä¿®æ”¹èƒŒæ™¯</h4>
                    <style>
                        .bgul {
                            list-style: none;
                            /*border-style: none;*/
                        }

                        .bgli {
                            width: 90px;
                            height: 60px;
                            /*border: 1px solid rgb(0, 195, 255);*/
                            float: left;
                            margin: 10px;
                            background-color: #001fab9f;
                            padding: 5px;
                            border-style: none;
                        }

                        .bgimg {
                            width: 80px;
                            height: 50px;
                            cursor: pointer;
                            /*border-style: none;*/
                        }
                    </style>
                    <!--é€‰æ‹©èƒŒæ™¯-->
                    <ul class="bgul">
                        <li class="bgli"><img alt="bg" src="/static/images/bgimg/bg-star.gif" class="rounded bgimg">STAR
                        </li>
                        <li class="bgli"><img alt="bg" src="/static/images/bgimg/bg-code.gif" class="rounded bgimg">CODE
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </aside>
    <script type="text/javascript">
        window.onload = function () { // åœ¨ç½‘é¡µåŠ è½½å®Œæ¯•åç«‹åˆ»æ‰§è¡Œæ“ä½œ
            var imgs = document.getElementsByClassName("bgimg");
            for (var i = 0; i < imgs.length; i++) {
                imgs[i].onclick = function () { // onclickäº‹ä»¶ä¼šåœ¨å…ƒç´ è¢«ç‚¹å‡»æ—¶å‘ç”Ÿ
                    document.body.style.backgroundImage = "var(--custom-bg-image, url('" + this.src + "')) !important";
                    console.log('background changed:' + this.src);
                }
            }
        }
    </script>
</body>

</html>